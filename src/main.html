<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style> </style>
</head>

<body>
    <div id="app"></div>
<!--    <div class= container>-->
<!--        <div class = "box">-->
<!--        <svg width="50" version="1.1" id="flower1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#ceadff" stroke="#ceadff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:#ceadff} </style> <g> <path class="st0" d="M512,223.537c0-61.46-49.773-111.264-111.264-111.264c-11.768,0-22.922,2.31-33.496,5.644 C366.948,56.657,317.346,7.084,255.985,7.084c-61.32,0-110.993,49.573-111.224,110.833c-10.573-3.334-21.728-5.644-33.496-5.644 C49.774,112.273,0,162.077,0,223.537c0,49.241,32.171,90.479,76.533,105.12c-13.294,18.354-21.276,40.656-21.276,64.985 c0,61.46,49.773,111.274,111.254,111.274c36.86,0,69.222-18.043,89.475-45.646c20.283,27.603,52.645,45.646,89.465,45.646 c61.521,0,111.264-49.813,111.264-111.274c0-24.329-7.993-46.631-21.246-64.985C479.829,314.017,512,272.779,512,223.537z M255.985,337.433c-31.971,0-57.927-25.916-57.927-57.887c0-31.981,25.956-57.897,57.927-57.897c32,0,57.926,25.916,57.926,57.897 C313.912,311.517,287.986,337.433,255.985,337.433z"></path> </g> </g></svg>-->
<!--            <div class= "text-box">-->
<!--                <h5>Type your username here!</h5>-->
<!--                <input class="username-input">-->
<!--                <button type="button" class="btn btn-primary username-enter" >Enter</button>-->
<!--            </div>-->
<!--            <svg width="50" version="1.1" id="flower2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#ceadff" stroke="#ceadff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css"> .st0{fill:#ceadff} </style> <g> <path class="st0" d="M512,223.537c0-61.46-49.773-111.264-111.264-111.264c-11.768,0-22.922,2.31-33.496,5.644 C366.948,56.657,317.346,7.084,255.985,7.084c-61.32,0-110.993,49.573-111.224,110.833c-10.573-3.334-21.728-5.644-33.496-5.644 C49.774,112.273,0,162.077,0,223.537c0,49.241,32.171,90.479,76.533,105.12c-13.294,18.354-21.276,40.656-21.276,64.985 c0,61.46,49.773,111.274,111.254,111.274c36.86,0,69.222-18.043,89.475-45.646c20.283,27.603,52.645,45.646,89.465,45.646 c61.521,0,111.264-49.813,111.264-111.274c0-24.329-7.993-46.631-21.246-64.985C479.829,314.017,512,272.779,512,223.537z M255.985,337.433c-31.971,0-57.927-25.916-57.927-57.887c0-31.981,25.956-57.897,57.927-57.897c32,0,57.926,25.916,57.926,57.897 C313.912,311.517,287.986,337.433,255.985,337.433z"></path> </g> </g></svg>-->

<!--        </div>-->
<!--        <div class = "counter-box">-->
<!--            <p class= "counter">{} guests are coming!</p>-->
<!--        </div>-->
<!--    </div>-->
<script type="text/babel">
            function invitationPage(){
                return(
                    <div className= "container2">
                        <h3 className="invitation-h3">Â· Â· â”€ Â·Êš You are invited â‚ŠËšâŠ¹ ğŸË– .áŸ ÉÂ· â”€ Â· Â·</h3>
                        <div className= "flap"></div>

                        <div className="invitation"></div>
                        <div className = "letter-box">

                        </div>
                        <div className = "top-env"></div>
                        <button className= "btn btn-primary rsvp-btn">Click here to RSVP!</button>
                    </div>
                )
            }

            class App extends React.Component {
                constructor(props){
                    super(props)
                    this.state = {
                        index: 0,
                        name: "",
                        author: "",
                        counter: 0
                    }
                    this.guestInput = React.createRef();
                }


                componentDidMount() {
                    fetch('http://127.0.0.1:8000/guests')
                    .then(response => response.json())
                    .then(data => {
                        const rsvped = data.filter(item => item.attendance === true)
                        console.log(data)
                        console.log(rsvped)
                        let count = 0
                        rsvped.forEach(item => count += parseInt(item.total)
                        )
                        this.setState({
                            name: data[0].name,
                            counter: count

                        })

                    })
                }

                getGuest = async (name) => {
                        try {
                            const res = await fetch(`http://127.0.0.1:8000/guests/${name}`);
                            if (res.status === 404) {
                                console.log("Guest not found")
                                return "Guest not found!";
                            }
                            console.log("hello")
                            return "hello!";
                        } catch (e) {
                            console.error(e);
                            return "Error!";
                        }
                    };

                changeColor = () => {
                    const color = ["blue", "yellow", "green", "pink", "purple"]
                    const qbox = document.getElementById("quote-box")
                    const newColorIndex = (this.state.colorIndex + 1) % color.length
                    //console.log(color, qbox, newColorIndex, this.state.colorIndex)
                    this.setState(state => ({
                            colorIndex: newColorIndex
                        }), qbox.classList.remove(`${color[this.state.colorIndex]}`), qbox.classList.add(`${color[newColorIndex]}`))



                }

                showNext = () => {
                    fetch('https://dummyjson.com/quotes')
                    .then(response => response.json())
                    .then(data => {
                        const newIndex = (this.state.index + 1) % data.quotes.length
                        this.setState(state => ({
                            index: newIndex,
                            quote: data.quotes[newIndex].quote,
                            author: data.quotes[newIndex].author,

                        }), this.changeColor)




                    })
                    }

                render () {

                    return (
                        <div className="container">
                            <div className = "box">
                               <svg
                                    width="50"
                                    id="flower1"
                                    viewBox="0 0 512 512"
                                    fill="#ceadff"
                                    stroke="#ceadff"
                                >
                                    <g>
                                        <path
                                            className="st0"
                                            d="M512,223.537c0-61.46-49.773-111.264-111.264-111.264c-11.768,0-22.922,2.31-33.496,5.644 C366.948,56.657,317.346,7.084,255.985,7.084c-61.32,0-110.993,49.573-111.224,110.833c-10.573-3.334-21.728-5.644-33.496-5.644 C49.774,112.273,0,162.077,0,223.537c0,49.241,32.171,90.479,76.533,105.12c-13.294,18.354-21.276,40.656-21.276,64.985 c0,61.46,49.773,111.274,111.254,111.274c36.86,0,69.222-18.043,89.475-45.646c20.283,27.603,52.645,45.646,89.465,45.646 c61.521,0,111.264-49.813,111.264-111.274c0-24.329-7.993-46.631-21.246-64.985C479.829,314.017,512,272.779,512,223.537z M255.985,337.433c-31.971,0-57.927-25.916-57.927-57.887c0-31.981,25.956-57.897,57.927-57.897c32,0,57.926,25.916,57.926,57.897 C313.912,311.517,287.986,337.433,255.985,337.433z"
                                        />
                                    </g>
                                </svg>
                                    <div className= "text-box">
                                        <h5>Type your username here!</h5>
                                        <input className="username-input" ref={this.guestInput}/>
                                        <button type="button" className="btn btn-primary username-enter" onClick={async()=> {
                                            const msg = await this.getGuest(this.guestInput.current.value)
                                            alert(msg)

                                        }}>Enter</button>
                                    </div>
                                        <svg
                                        width="50"
                                        id="flower2"
                                        viewBox="0 0 512 512"
                                        fill="#ceadff"
                                        stroke="#ceadff"
                                    >
                                        <g>
                                            <path
                                                className="st0"
                                                d="M512,223.537c0-61.46-49.773-111.264-111.264-111.264c-11.768,0-22.922,2.31-33.496,5.644 C366.948,56.657,317.346,7.084,255.985,7.084c-61.32,0-110.993,49.573-111.224,110.833c-10.573-3.334-21.728-5.644-33.496-5.644 C49.774,112.273,0,162.077,0,223.537c0,49.241,32.171,90.479,76.533,105.12c-13.294,18.354-21.276,40.656-21.276,64.985 c0,61.46,49.773,111.274,111.254,111.274c36.86,0,69.222-18.043,89.475-45.646c20.283,27.603,52.645,45.646,89.465,45.646 c61.521,0,111.264-49.813,111.264-111.274c0-24.329-7.993-46.631-21.246-64.985C479.829,314.017,512,272.779,512,223.537z M255.985,337.433c-31.971,0-57.927-25.916-57.927-57.887c0-31.981,25.956-57.897,57.927-57.897c32,0,57.926,25.916,57.926,57.897 C313.912,311.517,287.986,337.433,255.985,337.433z"
                                            />
                                        </g>
                                    </svg>
                                </div>
                                <div className = "counter-box">
                                    <p className= "counter"> {this.state.counter} guests are coming!</p>
                                </div>

                        </div>
                    )

                }

            }

            ReactDOM.render(<App />, document.querySelector("#app"));
        </script>
</body>
</html>